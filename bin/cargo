#!/bin/bash
subcommand="$1"
shift 1

cargo="$(rustup which cargo)"
if [[ $? -ne 0 ]]; then
	cargo="$(command -pv cargo)"
	[[ $? -ne 0 ]] && exit 1
fi

case "$subcommand" in
	test|build|check)
		exec "$cargo" "$subcommand" --color always "$@" 2>&1 | LESS="${LESS-RFX}" ${PAGER-less};;
	*) exec "$cargo" "$subcommand" "$@";;
esac

